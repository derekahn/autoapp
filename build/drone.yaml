---
pipeline:
  test:
    image: golang
    commands:
      - make test
      - make coverage

  coverage:
    image: plugins/codacy
    settings:
      token:
        from_secret: codacy_token

  build:
    image: plugins/docker
    repo: derekahn/autoapp
    dry_run: true
